#include "HV_FADC_Obj.h"


HV_FADC_Obj::HV_FADC_Obj(int sAddress_fadc, int baseAddress_hv)
{
    // upon initialisation of HV_FADC_Obj, we need to create the
    // V1729a_VME (FADC) instance and vmemodule (HV) instance
    // using the base Addresses

    // initialize Controller
    Controller.initController(0);
    HV_module   = new CVmeModule(&Controller, baseAddress_hv);

    std::cout << "creating.. " << HV_module->IsConnected() <<std::endl;
    std::cout << "creating2.. " << HV_module->IsConnected() <<std::endl;


    FADC_module = new V1729a_VME(sAddress_fadc);
    FADC_module->reset();
    
}


HV_FADC_Obj::~HV_FADC_Obj() {

    // Before we delete the FADC and HV modules,
    // we should properly shut both of them down
    // for FADC: reset?
    FADC_module->reset();

    // HV: shut down controller
    Controller.closeController();

    delete(FADC_module);
    //delete(Controller);
    delete(HV_module);
}
